<!DOCTYPE html><html lang="ja"><head>  <meta charset="UTF-8">  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>😸</text></svg>">  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0"><title>へのにっき</title>  <style>::selection{background-color:rgba(255,0,106,.3);text-shadow:2px 3px 9px #9e2c72}body{margin:0;padding:20px;background-color:rgba(255,253,245,.788);font-family:serif;color:#530c38}table{border-collapse:collapse;width:100%;max-width:975pt;margin:0 auto;box-shadow:#cfff82a1 -3px -3px 90px}h1{text-align:center;margin-bottom:20px;font-size:30px;color:#530c38}th{word-break:keep-all;font-size:20px;letter-spacing:1px}td,th{border:1px solid #b2cfdb;padding:8px;text-align:left}#controls{margin-bottom:20px;flex-wrap:wrap;justify-content:center;gap:10px}#controls,#yearControl{display:flex;align-items:center}#yearControl{background-color:#f0f0f080;border-radius:1pc;padding:5px;box-shadow:#c4d8e0a1 -3px -3px 1pc}#yearControl button{background-color:transparent;border:0;font-size:20px;cursor:pointer;padding:5px 10px}#currentYear{font-size:20px;margin:2px 4px;cursor:pointer}#floatingControls{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);background:hsla(0,0%,100%,.8);border:1px solid #ccc;padding:10px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.1);z-index:1}#floatingControls input[type="text"]{margin-right:10px}#dayFilters,#specialFilters{display:flex;gap:10px;margin-top:10px}#dayFilters label,#specialFilters button{background:hsla(0,0%,100%,.8);border:1px solid #ccc;padding:5px 10px;border-radius:5px;cursor:pointer}#dayFilters label:hover,#specialFilters button:hover{background:hsla(0,0%,78%,.8)}.saturday{background-color:#e6feff83}.sunday{background-color:#ffe6f281}.holiday{background-color:#ffe6e680}.editable{min-width:200px}.hidden{display:none}th{text-align:center}td:nth-child(1),td:nth-child(2),td:nth-child(3){text-align:center;font-weight:700}td:nth-child(1){font-size:18px;white-space:nowrap}td:nth-child(3){word-break:keep-all;letter-spacing:-2px}td:nth-child(4){letter-spacing:-1px;line-height:29px;font-feature-settings:palt\ 1;font-size:17px}@media(max-width:650px){td:nth-child(2),td:nth-child(3),th{display:none}td:nth-child(1),td:nth-child(4){display:block;width:auto;border-bottom:0}td:nth-child(1){order:1;width:auto}td:nth-child(4){order:2;font-size:14px;padding:10px}tr{display:flex;flex-direction:column}table{width:100%}}#searchContainer{position:fixed;bottom:0;left:0;right:0;padding:10px;display:flex;justify-content:center}#searchInput{width:300px;padding:10px;font-size:18px;border:1px solid #ccc;background-color:#ffffff80;border-radius:20px;text-align:center}.highlight{background-color:#dfffdf;cursor:pointer}</style></head>
<body><table id="diaryTable"><thead><tr><th>日付</th><th>曜</th><th>祝祭日</th><th>どうした</th></tr></thead><tbody id="diaryBody"></tbody></table>
<script>let entrydata={},holidays=[];const dayNames=["日","月","火","水","木","金","土"];let currentDate=new Date,currentYear=currentDate.getFullYear();const diaryBody=document.getElementById("diaryBody");async function loadJSONData(){try{let[t,e]=await Promise.all([fetch("holidays.json"),fetch("diary.json"),]),[a,n]=await Promise.all([t.json(),e.json()]);holidays=a.holidays,entrydata=n}catch(d){alert("データの読み込みに失敗 "+d)}}function loadYear(t){currentYear=t;let e=document.getElementById("diaryBody");e.innerHTML="";let a=new Date(2023,5,1),n=new Date(2031,11,31),d=document.createDocumentFragment();for(let r=new Date(a);r<=n;r.setDate(r.getDate()+1)){let l=document.createElement("tr"),o=document.createElement("td"),i=document.createElement("td"),s=document.createElement("td"),y=document.createElement("td"),c=`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}-${r.getDate().toString().padStart(2,"0")}`;o.textContent=c,i.textContent=dayNames[r.getDay()],y.className="editable",y.contentEditable=!0,y.textContent=entrydata[c]||"",0===r.getDay()?l.classList.add("sunday"):6===r.getDay()&&l.classList.add("saturday");let g=holidays.find(t=>t.date===c);g&&(l.classList.add("holiday"),s.textContent=g.name),l.appendChild(o),l.appendChild(i),l.appendChild(s),l.appendChild(y),d.appendChild(l)}e.appendChild(d);let m=new Date,p=`${m.getFullYear()}-${(m.getMonth()+1).toString().padStart(2,"0")}-${m.getDate().toString().padStart(2,"0")}`,h=Array.from(e.getElementsByTagName("tr")).find(t=>t.cells[0].textContent===p);h&&(h.scrollIntoView({behavior:"smooth",block:"center"}),h.style.transition="background-color 0.5s",h.style.backgroundColor="#ffeb3b50",setTimeout(()=>{h.style.backgroundColor=""},200))}document.getElementById("diaryBody").addEventListener("input",t=>{if("editable"===t.target.className){let e=t.target.parentElement.cells[0].textContent,a=t.target.textContent;(entrydata[e]=a)()}}),document.addEventListener("keydown",t=>{if(t.ctrlKey&&"s"===t.key){t.preventDefault();let e=JSON.stringify(entrydata,null,2);navigator.clipboard.writeText(e).then(()=>{window.open("https://github.com/buzomo/diary/edit/main/diary.json")}).catch(t=>{alert("コピーに失敗しました: "+t)})}}),document.addEventListener("DOMContentLoaded",async()=>{await loadJSONData(),loadYear(currentYear)});</script></body>